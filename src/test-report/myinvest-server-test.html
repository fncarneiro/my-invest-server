<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>My Invest Server API Test</title><link rel="stylesheet" href="assets\app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:5,&quot;tests&quot;:23,&quot;passes&quot;:23,&quot;pending&quot;:0,&quot;failures&quot;:0,&quot;start&quot;:&quot;2021-02-11T20:48:56.133Z&quot;,&quot;end&quot;:&quot;2021-02-11T20:48:56.931Z&quot;,&quot;duration&quot;:798,&quot;testsRegistered&quot;:23,&quot;passPercent&quot;:100,&quot;pendingPercent&quot;:0,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:0,&quot;hasSkipped&quot;:false},&quot;results&quot;:[{&quot;uuid&quot;:&quot;df0d0c6c-1040-49ed-bfdd-28821edf9fd7&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;0e47d1eb-26f8-433a-8719-376fd38e1f3b&quot;,&quot;title&quot;:&quot;Init&quot;,&quot;fullFile&quot;:&quot;D:\\Desenvolvimento\\my-invest-server\\test\\init.js&quot;,&quot;file&quot;:&quot;\\test\\init.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;check app status&quot;,&quot;fullTitle&quot;:&quot;Init check app status&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:21,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai.request(server).get(&#x27;/&#x27;).end((err, res) =&gt; { \n  expect(err).to.not.exist; \n  expect(res.status).to.equal(200); \n  done(); \n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ba5bedfa-899c-496f-9d6c-900beb49b386&quot;,&quot;parentUUID&quot;:&quot;0e47d1eb-26f8-433a-8719-376fd38e1f3b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ba5bedfa-899c-496f-9d6c-900beb49b386&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:21,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000},{&quot;uuid&quot;:&quot;ddcfbdb4-e33d-4c25-addb-05429cb789a0&quot;,&quot;title&quot;:&quot;Investments Route&quot;,&quot;fullFile&quot;:&quot;D:\\Desenvolvimento\\my-invest-server\\test\\investments.js&quot;,&quot;file&quot;:&quot;\\test\\investments.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Investments Route\&quot;&quot;,&quot;fullTitle&quot;:&quot;Investments Route \&quot;before all\&quot; hook in \&quot;Investments Route\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:87,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n    .request(server)\n    .post(\&quot;/login\&quot;)\n    .send(tokenUser)\n    .end((err, res) =&gt; {\n        token = res.body.token;\n        expect(res).to.have.status(200);\n        done();\n    });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e47fe223-6beb-45e3-9ade-56d8e1bc7b24&quot;,&quot;parentUUID&quot;:&quot;ddcfbdb4-e33d-4c25-addb-05429cb789a0&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Check Inserting a investment with future period.&quot;,&quot;fullTitle&quot;:&quot;Investments Route Check Inserting a investment with future period.&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n    .request(server)\n    .post(&#x27;/investments/&#x27;)\n    .set(\&quot;Authorization\&quot;, `Bearer ${token}`)\n    .send({\n        period: periodTomorrow\n    })\n    .end((err, res) =&gt; {\n        expect(err).not.exist;\n        expect(res.status).to.equal(400);\n        expect(res.body).to.be.a(&#x27;object&#x27;);\n        expect(res.body.errors[0]).to.have.property(&#x27;msg&#x27;, &#x27;Period must be iqual or less today.&#x27;);                \n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0326bdbf-e4b5-4afb-9901-169eea19679e&quot;,&quot;parentUUID&quot;:&quot;ddcfbdb4-e33d-4c25-addb-05429cb789a0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Insert a investment.&quot;,&quot;fullTitle&quot;:&quot;Investments Route Insert a investment.&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:15,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n    .request(server)\n    .post(&#x27;/investments/&#x27;)\n    .set(\&quot;Authorization\&quot;, `Bearer ${token}`)\n    .send({\n        period: periodToday\n    })\n    .end((err, res) =&gt; {\n        expect(err).not.exist;\n        expect(res.status).to.equal(201);\n        expect(res.body).to.be.a(&#x27;object&#x27;);\n        expect(res.body).to.have.property(&#x27;msg&#x27;, &#x27;Investment created.&#x27;);\n        expect(res.body).to.have.property(&#x27;investment&#x27;);\n        expect(res.body.investment).to.have.property(&#x27;id_investment&#x27;);\n        expect(res.body.investment).to.have.property(&#x27;period&#x27;).to.eql(periodToday);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d107a69f-492c-42ed-a1fd-1213567621cd&quot;,&quot;parentUUID&quot;:&quot;ddcfbdb4-e33d-4c25-addb-05429cb789a0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Check inserting a investment with duplicated period.&quot;,&quot;fullTitle&quot;:&quot;Investments Route Check inserting a investment with duplicated period.&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n    .request(server)\n    .post(&#x27;/investments/&#x27;)\n    .set(\&quot;Authorization\&quot;, `Bearer ${token}`)\n    .send({\n        period: periodToday\n    })\n    .end((err, res) =&gt; {\n        expect(err).not.exist;\n        expect(res.status).to.equal(409);\n        expect(res.body).to.be.a(&#x27;object&#x27;);\n        expect(res.body).to.have.property(&#x27;msg&#x27;, &#x27;Period already exists.&#x27;);  \n        expect(res.body).to.have.property(&#x27;period&#x27;).to.eql(periodToday);              \n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;02c26034-c9e7-4365-9223-83a8d81c1b45&quot;,&quot;parentUUID&quot;:&quot;ddcfbdb4-e33d-4c25-addb-05429cb789a0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Get all investments.&quot;,&quot;fullTitle&quot;:&quot;Investments Route Get all investments.&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n    .request(server)\n    .get(&#x27;/investments&#x27;)\n    .set(\&quot;Authorization\&quot;, `Bearer ${token}`)\n    .end((err, res) =&gt; {\n        expect(err).not.exist;\n        expect(res.status).to.equal(200);\n        expect(res.body).to.be.a(&#x27;object&#x27;);\n        expect(res.body).to.have.property(&#x27;records&#x27;).to.eql(1);\n        expect(res.body).to.have.property(&#x27;investments&#x27;).to.have.lengthOf(1);\n        expect(res.body.investments[0]).to.have.property(&#x27;id_investment&#x27;);\n        expect(res.body.investments[0]).to.have.property(&#x27;period&#x27;); \n        id_investment = res.body.investments[0].id_investment;\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1016179e-5ada-4c03-87e5-50fc8e19de1c&quot;,&quot;parentUUID&quot;:&quot;ddcfbdb4-e33d-4c25-addb-05429cb789a0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Get one investment.&quot;,&quot;fullTitle&quot;:&quot;Investments Route Get one investment.&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n    .request(server)\n    .get(`/investments/${id_investment}`)\n    .set(\&quot;Authorization\&quot;, `Bearer ${token}`)\n    .end((err, res) =&gt; {\n        expect(err).not.exist;\n        expect(res.status).to.equal(200);\n        expect(res.body).to.be.a(&#x27;object&#x27;);\n        expect(res.body).to.have.property(&#x27;records&#x27;).to.eql(1);\n        expect(res.body).to.have.property(&#x27;investment&#x27;);\n        expect(res.body.investment).to.have.property(&#x27;id_investment&#x27;).to.eql(id_investment);\n        expect(res.body.investment).to.have.property(&#x27;period&#x27;).to.eql(periodToday+&#x27;T03:00:00.000Z&#x27;);                \n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;86ff3320-0ecf-49f8-989f-7d61ea65f4f1&quot;,&quot;parentUUID&quot;:&quot;ddcfbdb4-e33d-4c25-addb-05429cb789a0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Update a investment.&quot;,&quot;fullTitle&quot;:&quot;Investments Route Update a investment.&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:18,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n    .request(server)\n    .put(`/investments/${id_investment}`)\n    .set(\&quot;Authorization\&quot;, `Bearer ${token}`)\n    .send({ period: periodYesterday })\n    .end((err, res) =&gt; {\n        expect(err).not.exist;\n        expect(res.status).to.equal(202);\n        expect(res.body).to.be.a(&#x27;object&#x27;);\n        expect(res.body).to.have.property(&#x27;msg&#x27;, &#x27;Investment updated.&#x27;);\n        expect(res.body).to.have.property(&#x27;investment&#x27;);\n        expect(res.body.investment).to.have.property(&#x27;id_investment&#x27;);\n        expect(res.body.investment).to.have.property(&#x27;period&#x27;).to.eql(periodYesterday);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ebec4edf-0f36-4809-8ac9-0a37d745011e&quot;,&quot;parentUUID&quot;:&quot;ddcfbdb4-e33d-4c25-addb-05429cb789a0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Delete a investment.&quot;,&quot;fullTitle&quot;:&quot;Investments Route Delete a investment.&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:15,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n    .request(server)\n    .delete(`/investments/${id_investment}`)\n    .set(\&quot;Authorization\&quot;, `Bearer ${token}`)            \n    .end((err, res) =&gt; {\n        expect(err).not.exist;\n        expect(res.status).to.equal(202);\n        expect(res.body).to.be.a(&#x27;object&#x27;);\n        expect(res.body).to.have.property(&#x27;msg&#x27;, &#x27;Investment deleted.&#x27;);\n        expect(res.body.investment).to.have.property(&#x27;id_investment&#x27;).to.eql(id_investment);                 \n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a26b2646-86a1-4909-b8b5-00fe01279f5e&quot;,&quot;parentUUID&quot;:&quot;ddcfbdb4-e33d-4c25-addb-05429cb789a0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0326bdbf-e4b5-4afb-9901-169eea19679e&quot;,&quot;d107a69f-492c-42ed-a1fd-1213567621cd&quot;,&quot;02c26034-c9e7-4365-9223-83a8d81c1b45&quot;,&quot;1016179e-5ada-4c03-87e5-50fc8e19de1c&quot;,&quot;86ff3320-0ecf-49f8-989f-7d61ea65f4f1&quot;,&quot;ebec4edf-0f36-4809-8ac9-0a37d745011e&quot;,&quot;a26b2646-86a1-4909-b8b5-00fe01279f5e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:80,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000},{&quot;uuid&quot;:&quot;fdf8f28b-7c45-4d36-a8df-a7b4c4f9eb0c&quot;,&quot;title&quot;:&quot;Login Route&quot;,&quot;fullFile&quot;:&quot;D:\\Desenvolvimento\\my-invest-server\\test\\login.js&quot;,&quot;file&quot;:&quot;\\test\\login.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Check login without parameter.&quot;,&quot;fullTitle&quot;:&quot;Login Route Check login without parameter.&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n    .request(server)\n    .post(&#x27;/login&#x27;)\n    .send({})\n    .end((err, res) =&gt; {\n        const bodyMsgs = res.body.errors.map((obj) =&gt; obj.msg);\n        const msgs = [&#x27;Email is required.&#x27;,\n            &#x27;Invalid Email format (email@domain.com).&#x27;,\n            &#x27;Password is required.&#x27;,\n            &#x27;Password must have min 8 characters.&#x27;];\n        expect(res.status).to.equal(400);\n        expect(res.body).to.be.a(&#x27;object&#x27;);\n        expect(res.body.errors).to.have.lengthOf(4);\n        bodyMsgs.map((element, index) =&gt; {\n            expect(element).to.equal(`${msgs[index]}`);\n        });\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b870ef0a-1146-441d-872d-bc01a0ddf429&quot;,&quot;parentUUID&quot;:&quot;fdf8f28b-7c45-4d36-a8df-a7b4c4f9eb0c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Check login with wrong password.&quot;,&quot;fullTitle&quot;:&quot;Login Route Check login with wrong password.&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:65,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n    .request(server)\n    .post(&#x27;/login&#x27;)\n    .send({\n        email: defaultUser.email,\n        password: faker.internet.password(8)\n    })\n    .end((err, res) =&gt; {\n        expect(res.status).to.equal(401);\n        expect(res.body).to.be.a(&#x27;object&#x27;);\n        expect(res.body).to.have.property(&#x27;msg&#x27;, &#x27;Authentication failed.&#x27;);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5d8ccf6d-17d5-45a9-b2f6-0631df9e1659&quot;,&quot;parentUUID&quot;:&quot;fdf8f28b-7c45-4d36-a8df-a7b4c4f9eb0c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Check success login.&quot;,&quot;fullTitle&quot;:&quot;Login Route Check success login.&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:62,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n    .request(server)\n    .post(&#x27;/login&#x27;)\n    .send( defaultUser )\n    .end((err, res) =&gt; {\n        expect(res.status).to.equal(200);\n        expect(err).not.exist;\n        expect(res.body).to.be.a(&#x27;object&#x27;);\n        expect(res.body).to.have.property(&#x27;msg&#x27;, &#x27;Authentication success.&#x27;);\n        expect(res.body).to.have.property(&#x27;token&#x27;);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7e58c63a-6abf-450e-beff-1ce0fff95d0d&quot;,&quot;parentUUID&quot;:&quot;fdf8f28b-7c45-4d36-a8df-a7b4c4f9eb0c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b870ef0a-1146-441d-872d-bc01a0ddf429&quot;,&quot;5d8ccf6d-17d5-45a9-b2f6-0631df9e1659&quot;,&quot;7e58c63a-6abf-450e-beff-1ce0fff95d0d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:138,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000},{&quot;uuid&quot;:&quot;dd8f503b-bd71-49c1-b2ec-4ed61e24e6e8&quot;,&quot;title&quot;:&quot;Stocks Route&quot;,&quot;fullFile&quot;:&quot;D:\\Desenvolvimento\\my-invest-server\\test\\stocks.js&quot;,&quot;file&quot;:&quot;\\test\\stocks.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Stocks Route\&quot;&quot;,&quot;fullTitle&quot;:&quot;Stocks Route \&quot;before all\&quot; hook in \&quot;Stocks Route\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:61,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n    .request(server)\n    .post(\&quot;/login\&quot;)\n    .send(tokenUser)\n    .end((err, res) =&gt; {\n        token = res.body.token;\n        expect(res).to.have.status(200);\n        done();\n    });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0b2f6f1e-bb3a-4acd-a4c5-fa9d0475f552&quot;,&quot;parentUUID&quot;:&quot;dd8f503b-bd71-49c1-b2ec-4ed61e24e6e8&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Stocks Route\&quot;&quot;,&quot;fullTitle&quot;:&quot;Stocks Route \&quot;before all\&quot; hook in \&quot;Stocks Route\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:21,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n    .request(server)\n    .post(&#x27;/investments/&#x27;)\n    .set(\&quot;Authorization\&quot;, `Bearer ${token}`)\n    .send({\n        period: periodToday\n    })\n    .end((err, res) =&gt; {\n        expect(err).not.exist;\n        expect(res.status).to.equal(201);\n        defaultStock.id_investment = res.body.investment.id_investment;\n        done();\n    });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b8b83a0a-375b-483b-a6b2-dff9649613da&quot;,&quot;parentUUID&quot;:&quot;dd8f503b-bd71-49c1-b2ec-4ed61e24e6e8&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;Stocks Route\&quot;&quot;,&quot;fullTitle&quot;:&quot;Stocks Route \&quot;after all\&quot; hook in \&quot;Stocks Route\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:19,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n    .request(server)\n    .delete(`/investments/${defaultStock.id_investment}`)\n    .set(\&quot;Authorization\&quot;, `Bearer ${token}`)\n    .end((err, res) =&gt; {\n        expect(err).not.exist;\n        expect(res.status).to.equal(202);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;003caa5e-613a-4473-b14c-6a5ddc810592&quot;,&quot;parentUUID&quot;:&quot;dd8f503b-bd71-49c1-b2ec-4ed61e24e6e8&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;Insert a Stock.&quot;,&quot;fullTitle&quot;:&quot;Stocks Route Insert a Stock.&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n    .request(server)\n    .post(&#x27;/stocks/&#x27;)\n    .set(\&quot;Authorization\&quot;, `Bearer ${token}`)\n    .send(defaultStock)\n    .end((err, res) =&gt; {                \n        expect(err).not.exist;\n        expect(res.status).to.equal(201);\n        expect(res.body).to.be.a(&#x27;object&#x27;);\n        expect(res.body).to.have.property(&#x27;msg&#x27;, &#x27;Stock created.&#x27;);                \n        expect(res.body.stock).to.have.property(&#x27;id_stock&#x27;).to.eql(res.body.stock.id_stock);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2ac70496-310b-4176-a4d8-360633091c33&quot;,&quot;parentUUID&quot;:&quot;dd8f503b-bd71-49c1-b2ec-4ed61e24e6e8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Check inserting a Stock with not found investment.&quot;,&quot;fullTitle&quot;:&quot;Stocks Route Check inserting a Stock with not found investment.&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let wrongStock = {...defaultStock};\nwrongStock.id_investment = 0;  \nchai\n    .request(server)\n    .post(&#x27;/stocks/&#x27;)\n    .set(\&quot;Authorization\&quot;, `Bearer ${token}`)\n    .send( wrongStock )\n    .end((err, res) =&gt; {                \n        expect(err).not.exist;\n        expect(res.status).to.equal(409);\n        expect(res.body).to.be.a(&#x27;object&#x27;);\n        expect(res.body).to.have.property(&#x27;msg&#x27;, &#x27;Investment not found.&#x27;);                \n        expect(res.body).to.have.property(&#x27;id_investment&#x27;).to.eql(res.body.id_investment);\n        done(); \n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2255b702-b8e5-4a7f-8b5d-45746134a309&quot;,&quot;parentUUID&quot;:&quot;dd8f503b-bd71-49c1-b2ec-4ed61e24e6e8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Get all stocks.&quot;,&quot;fullTitle&quot;:&quot;Stocks Route Get all stocks.&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n    .request(server)\n    .get(&#x27;/stocks&#x27;)\n    .set(\&quot;Authorization\&quot;, `Bearer ${token}`)\n    .end((err, res) =&gt; {\n        expect(err).not.exist;\n        expect(res.status).to.equal(200);\n        expect(res.body).to.be.a(&#x27;object&#x27;);\n        expect(res.body).to.have.property(&#x27;records&#x27;).to.eql(1);\n        expect(res.body).to.have.property(&#x27;stocks&#x27;).to.have.lengthOf(1);\n        expect(res.body.stocks[0]).to.have.property(&#x27;id_stock&#x27;);\n        expect(res.body.stocks[0]).to.have.property(&#x27;stock_name&#x27;); \n        id_stock = res.body.stocks[0].id_stock;\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c3165848-4a9f-43a1-8080-dd310fd3dfaa&quot;,&quot;parentUUID&quot;:&quot;dd8f503b-bd71-49c1-b2ec-4ed61e24e6e8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Get one stock.&quot;,&quot;fullTitle&quot;:&quot;Stocks Route Get one stock.&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n    .request(server)\n    .get(`/stocks/${id_stock}`)\n    .set(\&quot;Authorization\&quot;, `Bearer ${token}`)\n    .end((err, res) =&gt; {\n        expect(err).not.exist;\n        expect(res.status).to.equal(200);\n        expect(res.body).to.be.a(&#x27;object&#x27;);\n        expect(res.body).to.have.property(&#x27;records&#x27;).to.eql(1);\n        expect(res.body).to.have.property(&#x27;stock&#x27;);\n        expect(res.body.stock).to.have.property(&#x27;id_stock&#x27;).to.eql(id_stock);\n        expect(res.body.stock).to.have.property(&#x27;stock_name&#x27;).to.eql(defaultStock.stock_name);                \n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;04b0f050-d8f8-49af-bd64-ce9d905a5d0f&quot;,&quot;parentUUID&quot;:&quot;dd8f503b-bd71-49c1-b2ec-4ed61e24e6e8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Update a stock.&quot;,&quot;fullTitle&quot;:&quot;Stocks Route Update a stock.&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let otherStock = {...defaultStock};\notherStock.stock_name = &#x27;KNRI11&#x27;;\nchai\n    .request(server)\n    .put(`/stocks/${id_stock}`)\n    .set(\&quot;Authorization\&quot;, `Bearer ${token}`)\n    .send( otherStock )\n    .end((err, res) =&gt; {\n        expect(err).not.exist;\n        expect(res.status).to.equal(202);\n        expect(res.body).to.be.a(&#x27;object&#x27;);\n        expect(res.body).to.have.property(&#x27;msg&#x27;, &#x27;Stock updated.&#x27;);\n        expect(res.body).to.have.property(&#x27;stock&#x27;);\n        expect(res.body.stock).to.have.property(&#x27;id_stock&#x27;);\n        expect(res.body.stock).to.have.property(&#x27;stock_name&#x27;).to.eql(otherStock.stock_name);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;994488e5-5080-4983-ab91-899ecc928fef&quot;,&quot;parentUUID&quot;:&quot;dd8f503b-bd71-49c1-b2ec-4ed61e24e6e8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Delete a stock.&quot;,&quot;fullTitle&quot;:&quot;Stocks Route Delete a stock.&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n    .request(server)\n    .delete(`/stocks/${id_stock}`)\n    .set(\&quot;Authorization\&quot;, `Bearer ${token}`)            \n    .end((err, res) =&gt; {\n        expect(err).not.exist;\n        expect(res.status).to.equal(202);\n        expect(res.body).to.be.a(&#x27;object&#x27;);\n        expect(res.body).to.have.property(&#x27;msg&#x27;, &#x27;Stock deleted.&#x27;);\n        expect(res.body.stock).to.have.property(&#x27;id_stock&#x27;).to.eql(id_stock);                 \n        done(); \n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a25bc0e7-b87e-451d-95a2-6a5e7b01741d&quot;,&quot;parentUUID&quot;:&quot;dd8f503b-bd71-49c1-b2ec-4ed61e24e6e8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2ac70496-310b-4176-a4d8-360633091c33&quot;,&quot;2255b702-b8e5-4a7f-8b5d-45746134a309&quot;,&quot;c3165848-4a9f-43a1-8080-dd310fd3dfaa&quot;,&quot;04b0f050-d8f8-49af-bd64-ce9d905a5d0f&quot;,&quot;994488e5-5080-4983-ab91-899ecc928fef&quot;,&quot;a25bc0e7-b87e-451d-95a2-6a5e7b01741d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:67,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000},{&quot;uuid&quot;:&quot;a06b6e6b-78c1-40de-8839-9d06a366c23a&quot;,&quot;title&quot;:&quot;Users Route&quot;,&quot;fullFile&quot;:&quot;D:\\Desenvolvimento\\my-invest-server\\test\\users.js&quot;,&quot;file&quot;:&quot;\\test\\users.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Users Route\&quot;&quot;,&quot;fullTitle&quot;:&quot;Users Route \&quot;before all\&quot; hook in \&quot;Users Route\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:64,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n    .request(server)\n    .post(\&quot;/login\&quot;)\n    .send(tokenUser)\n    .end((err, res) =&gt; {\n        token = res.body.token;\n        expect(res).to.have.status(200);\n        done();\n    });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3ed8e6be-b4f1-435a-9289-009f0556383b&quot;,&quot;parentUUID&quot;:&quot;a06b6e6b-78c1-40de-8839-9d06a366c23a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Insert a user.&quot;,&quot;fullTitle&quot;:&quot;Users Route Insert a user.&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:70,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n    .request(server)\n    .post(&#x27;/users/&#x27;)\n    .set(\&quot;Authorization\&quot;, `Bearer ${token}`)\n    .send({\n        email: user_email,\n        password: faker.internet.password(8),\n        permission_level: 0\n    })\n    .end((err, res) =&gt; {\n        expect(err).not.exist;\n        expect(res.status).to.equal(201);\n        expect(res.body).to.be.a(&#x27;object&#x27;);\n        expect(res.body).to.have.property(&#x27;msg&#x27;, &#x27;User created.&#x27;);\n        expect(res.body).to.have.property(&#x27;user&#x27;);\n        expect(res.body.user).to.have.property(&#x27;id_user&#x27;);               \n        expect(res.body.user).to.have.property(&#x27;email&#x27;).to.eql(user_email);\n        expect(res.body.user).to.have.property(&#x27;permission_level&#x27;).to.eql(0);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1fb81fd0-5872-45ae-b3ce-19c2468dc13b&quot;,&quot;parentUUID&quot;:&quot;a06b6e6b-78c1-40de-8839-9d06a366c23a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Insert a duplicated user.&quot;,&quot;fullTitle&quot;:&quot;Users Route Insert a duplicated user.&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n    .request(server)\n    .post(&#x27;/users/&#x27;)\n    .set(\&quot;Authorization\&quot;, `Bearer ${token}`)\n    .send({\n        email: &#x27;myinvest@server.com&#x27;,\n        password: faker.internet.password(8),\n        permission_level: 0 \n    })\n    .end((err, res) =&gt; {     \n        expect(err).not.exist;           \n        expect(res.status).to.equal(409);\n        expect(res.body).to.be.a(&#x27;object&#x27;);\n        expect(res.body).to.have.property(&#x27;msg&#x27;, &#x27;Email already exists.&#x27;); \n        expect(res.body).to.have.property(&#x27;email&#x27;).to.eql(&#x27;myinvest@server.com&#x27;);                \n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;81ff9cb6-d624-4f0f-86e7-527b4ab538ea&quot;,&quot;parentUUID&quot;:&quot;a06b6e6b-78c1-40de-8839-9d06a366c23a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Get all users.&quot;,&quot;fullTitle&quot;:&quot;Users Route Get all users.&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n    .request(server)\n    .get(&#x27;/users&#x27;)\n    .set(\&quot;Authorization\&quot;, `Bearer ${token}`)\n    .end((err, res) =&gt; {\n        expect(err).not.exist;\n        expect(res.status).to.equal(200);\n        expect(res.body).to.be.a(&#x27;object&#x27;);\n        expect(res.body).to.have.property(&#x27;records&#x27;).to.eql(2);\n        expect(res.body).to.have.property(&#x27;users&#x27;).to.have.lengthOf(2);\n        expect(res.body.users[1].user).to.have.property(&#x27;id_user&#x27;);\n        expect(res.body.users[1].user).to.have.property(&#x27;email&#x27;);\n        expect(res.body.users[1].user).to.have.property(&#x27;permission_level&#x27;);\n        user_email = res.body.users[1].user.email;\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;741b62c0-b5ce-4613-9b80-060e1b8fb8e8&quot;,&quot;parentUUID&quot;:&quot;a06b6e6b-78c1-40de-8839-9d06a366c23a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Get one user.&quot;,&quot;fullTitle&quot;:&quot;Users Route Get one user.&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n    .request(server)\n    .get(`/users/${user_email}`)\n    .set(\&quot;Authorization\&quot;, `Bearer ${token}`)\n    .end((err, res) =&gt; {\n        expect(err).not.exist;\n        expect(res.status).to.equal(200);\n        expect(res.body).to.be.a(&#x27;object&#x27;);\n        expect(res.body).to.have.property(&#x27;records&#x27;).to.eql(1);\n        expect(res.body).to.have.property(&#x27;user&#x27;);\n        expect(res.body.user).to.have.property(&#x27;id_user&#x27;);\n        expect(res.body.user).to.have.property(&#x27;email&#x27;).to.eql(user_email);\n        expect(res.body.user).to.have.property(&#x27;permission_level&#x27;).to.eql(0);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;209e9cf1-310d-4c7b-b1b9-2a1580d184a0&quot;,&quot;parentUUID&quot;:&quot;a06b6e6b-78c1-40de-8839-9d06a366c23a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Update a user password.&quot;,&quot;fullTitle&quot;:&quot;Users Route Update a user password.&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:69,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n    .request(server)\n    .put(&#x27;/users/&#x27;)\n    .set(\&quot;Authorization\&quot;, `Bearer ${token}`)\n    .send({\n        email: user_email,\n        password: faker.internet.password(8)                \n    })\n    .end((err, res) =&gt; {\n        expect(err).not.exist;\n        expect(res.status).to.equal(202);\n        expect(res.body).to.be.a(&#x27;object&#x27;);\n        expect(res.body).to.have.property(&#x27;msg&#x27;, &#x27;User password updated.&#x27;);\n        expect(res.body).to.have.property(&#x27;user&#x27;);\n        expect(res.body.user).to.have.property(&#x27;id_user&#x27;);\n        expect(res.body.user).to.have.property(&#x27;email&#x27;).to.eql(user_email);                \n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6a5c2875-6f50-4734-a98d-b7d3ea13dab9&quot;,&quot;parentUUID&quot;:&quot;a06b6e6b-78c1-40de-8839-9d06a366c23a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Delete a user.&quot;,&quot;fullTitle&quot;:&quot;Users Route Delete a user.&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n    .request(server)\n    .delete(&#x27;/users/&#x27;)\n    .set(\&quot;Authorization\&quot;, `Bearer ${token}`)\n    .send({\n        email: user_email                              \n    })\n    .end((err, res) =&gt; {\n        expect(err).not.exist;\n        expect(res.status).to.equal(202);\n        expect(res.body).to.be.a(&#x27;object&#x27;);\n        expect(res.body).to.have.property(&#x27;msg&#x27;, &#x27;User deleted.&#x27;);\n        expect(res.body).to.have.property(&#x27;user&#x27;);                \n        expect(res.body.user).to.have.property(&#x27;email&#x27;).to.eql(user_email);                \n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;df00f17a-bdcb-4e54-aeda-1e1204827ed3&quot;,&quot;parentUUID&quot;:&quot;a06b6e6b-78c1-40de-8839-9d06a366c23a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1fb81fd0-5872-45ae-b3ce-19c2468dc13b&quot;,&quot;81ff9cb6-d624-4f0f-86e7-527b4ab538ea&quot;,&quot;741b62c0-b5ce-4613-9b80-060e1b8fb8e8&quot;,&quot;209e9cf1-310d-4c7b-b1b9-2a1580d184a0&quot;,&quot;6a5c2875-6f50-4734-a98d-b7d3ea13dab9&quot;,&quot;df00f17a-bdcb-4e54-aeda-1e1204827ed3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:175,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:1000}],&quot;meta&quot;:{&quot;mocha&quot;:{&quot;version&quot;:&quot;8.2.1&quot;},&quot;mochawesome&quot;:{&quot;options&quot;:{&quot;quiet&quot;:false,&quot;reportFilename&quot;:&quot;myinvest-server-test&quot;,&quot;saveHtml&quot;:true,&quot;saveJson&quot;:true,&quot;consoleReporter&quot;:&quot;spec&quot;,&quot;useInlineDiffs&quot;:false,&quot;code&quot;:true},&quot;version&quot;:&quot;6.2.1&quot;},&quot;marge&quot;:{&quot;options&quot;:{&quot;autoOpen&quot;:&quot;true&quot;,&quot;reportDir&quot;:&quot;test-report&quot;,&quot;reportFilename&quot;:&quot;myinvest-server-test&quot;,&quot;reportPageTitle&quot;:&quot;My Invest Server API Test&quot;,&quot;reportTitle&quot;:&quot;My Invest Server API Test&quot;},&quot;version&quot;:&quot;5.1.0&quot;}}}" data-config="{&quot;reportFilename&quot;:&quot;myinvest-server-test&quot;,&quot;reportDir&quot;:&quot;test-report&quot;,&quot;reportTitle&quot;:&quot;My Invest Server API Test&quot;,&quot;reportPageTitle&quot;:&quot;My Invest Server API Test&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:false,&quot;enableCharts&quot;:false,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:true,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:true,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;test-report\\assets&quot;,&quot;jsonFile&quot;:&quot;D:\\Desenvolvimento\\my-invest-server\\test-report\\myinvest-server-test.json&quot;,&quot;htmlFile&quot;:&quot;D:\\Desenvolvimento\\my-invest-server\\test-report\\myinvest-server-test.html&quot;}"><div id="report"></div><script src="assets\app.js"></script></body></html>