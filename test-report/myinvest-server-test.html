<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>My Invest Server API Test</title><link rel="stylesheet" href="assets\app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:5,&quot;tests&quot;:23,&quot;passes&quot;:17,&quot;pending&quot;:0,&quot;failures&quot;:6,&quot;start&quot;:&quot;2021-02-09T22:09:38.006Z&quot;,&quot;end&quot;:&quot;2021-02-09T22:09:38.684Z&quot;,&quot;duration&quot;:678,&quot;testsRegistered&quot;:23,&quot;passPercent&quot;:73.91304347826086,&quot;pendingPercent&quot;:0,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:0,&quot;hasSkipped&quot;:false},&quot;results&quot;:[{&quot;uuid&quot;:&quot;e127e406-5ca8-459c-99df-a7b7c21953fa&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;766e8cfd-db4e-4727-abf9-a4fc33fd0929&quot;,&quot;title&quot;:&quot;Init&quot;,&quot;fullFile&quot;:&quot;D:\\Desenvolvimento\\my-invest-server\\test\\init.js&quot;,&quot;file&quot;:&quot;\\test\\init.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;check app status&quot;,&quot;fullTitle&quot;:&quot;Init check app status&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:19,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai.request(server).get(&#x27;/&#x27;).end((err, res) =&gt; { \n  expect(err).to.not.exist; \n  expect(res.status).to.equal(200); \n  done(); \n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bec1bbc7-f14a-4b17-bbfe-aaf0650610a8&quot;,&quot;parentUUID&quot;:&quot;766e8cfd-db4e-4727-abf9-a4fc33fd0929&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bec1bbc7-f14a-4b17-bbfe-aaf0650610a8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:19,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000},{&quot;uuid&quot;:&quot;4ab43a27-5da3-4fa3-a3a0-8a9cb43a0b94&quot;,&quot;title&quot;:&quot;Investments Route&quot;,&quot;fullFile&quot;:&quot;D:\\Desenvolvimento\\my-invest-server\\test\\investments.js&quot;,&quot;file&quot;:&quot;\\test\\investments.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Investments Route\&quot;&quot;,&quot;fullTitle&quot;:&quot;Investments Route \&quot;before all\&quot; hook in \&quot;Investments Route\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:87,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n    .request(server)\n    .post(\&quot;/login\&quot;)\n    .send(tokenUser)\n    .end((err, res) =&gt; {\n        token = res.body.token;\n        expect(res).to.have.status(200);\n        done();\n    });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a385e570-b48e-4b4f-8568-7e6a4e197c37&quot;,&quot;parentUUID&quot;:&quot;4ab43a27-5da3-4fa3-a3a0-8a9cb43a0b94&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Check Inserting a investment with future period.&quot;,&quot;fullTitle&quot;:&quot;Investments Route Check Inserting a investment with future period.&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n    .request(server)\n    .post(&#x27;/investments/&#x27;)\n    .set(\&quot;Authorization\&quot;, `Bearer ${token}`)\n    .send({\n        period: periodTomorrow\n    })\n    .end((err, res) =&gt; {\n        expect(err).not.exist;\n        expect(res.status).to.equal(400);\n        expect(res.body).to.be.a(&#x27;object&#x27;);\n        expect(res.body.errors[0]).to.have.property(&#x27;msg&#x27;, &#x27;Period must be iqual or less today.&#x27;);                \n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;68b102bb-f4c4-4f07-b412-9420500c1395&quot;,&quot;parentUUID&quot;:&quot;4ab43a27-5da3-4fa3-a3a0-8a9cb43a0b94&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Insert a investment.&quot;,&quot;fullTitle&quot;:&quot;Investments Route Insert a investment.&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:16,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n    .request(server)\n    .post(&#x27;/investments/&#x27;)\n    .set(\&quot;Authorization\&quot;, `Bearer ${token}`)\n    .send({\n        period: periodToday\n    })\n    .end((err, res) =&gt; {\n        expect(err).not.exist;\n        expect(res.status).to.equal(201);\n        expect(res.body).to.be.a(&#x27;object&#x27;);\n        expect(res.body).to.have.property(&#x27;msg&#x27;, &#x27;Investment created.&#x27;);\n        expect(res.body).to.have.property(&#x27;investment&#x27;);\n        expect(res.body.investment).to.have.property(&#x27;id_investment&#x27;);\n        expect(res.body.investment).to.have.property(&#x27;period&#x27;).to.eql(periodToday);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bf8d20b4-d0e7-4622-ad0d-24d3dcd77376&quot;,&quot;parentUUID&quot;:&quot;4ab43a27-5da3-4fa3-a3a0-8a9cb43a0b94&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Check inserting a investment with duplicated period.&quot;,&quot;fullTitle&quot;:&quot;Investments Route Check inserting a investment with duplicated period.&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n    .request(server)\n    .post(&#x27;/investments/&#x27;)\n    .set(\&quot;Authorization\&quot;, `Bearer ${token}`)\n    .send({\n        period: periodToday\n    })\n    .end((err, res) =&gt; {\n        expect(err).not.exist;\n        expect(res.status).to.equal(409);\n        expect(res.body).to.be.a(&#x27;object&#x27;);\n        expect(res.body).to.have.property(&#x27;msg&#x27;, &#x27;Period already exists.&#x27;);  \n        expect(res.body).to.have.property(&#x27;period&#x27;).to.eql(periodToday);              \n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e7050b63-0336-468b-a1b2-d02f32dd6de2&quot;,&quot;parentUUID&quot;:&quot;4ab43a27-5da3-4fa3-a3a0-8a9cb43a0b94&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Get all investments.&quot;,&quot;fullTitle&quot;:&quot;Investments Route Get all investments.&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n    .request(server)\n    .get(&#x27;/investments&#x27;)\n    .set(\&quot;Authorization\&quot;, `Bearer ${token}`)\n    .end((err, res) =&gt; {\n        expect(err).not.exist;\n        expect(res.status).to.equal(200);\n        expect(res.body).to.be.a(&#x27;object&#x27;);\n        expect(res.body).to.have.property(&#x27;records&#x27;).to.eql(1);\n        expect(res.body).to.have.property(&#x27;investments&#x27;).to.have.lengthOf(1);\n        expect(res.body.investments[0]).to.have.property(&#x27;id_investment&#x27;);\n        expect(res.body.investments[0]).to.have.property(&#x27;period&#x27;); \n        id_investment = res.body.investments[0].id_investment;\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1b876c0c-adc3-4afb-84d3-78db2bba00c4&quot;,&quot;parentUUID&quot;:&quot;4ab43a27-5da3-4fa3-a3a0-8a9cb43a0b94&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Get one investment.&quot;,&quot;fullTitle&quot;:&quot;Investments Route Get one investment.&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n    .request(server)\n    .get(`/investments/${id_investment}`)\n    .set(\&quot;Authorization\&quot;, `Bearer ${token}`)\n    .end((err, res) =&gt; {\n        expect(err).not.exist;\n        expect(res.status).to.equal(200);\n        expect(res.body).to.be.a(&#x27;object&#x27;);\n        expect(res.body).to.have.property(&#x27;records&#x27;).to.eql(1);\n        expect(res.body).to.have.property(&#x27;investment&#x27;);\n        expect(res.body.investment).to.have.property(&#x27;id_investment&#x27;).to.eql(id_investment);\n        expect(res.body.investment).to.have.property(&#x27;period&#x27;).to.eql(periodToday+&#x27;T03:00:00.000Z&#x27;);                \n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5bc00a30-41fe-476e-802c-714662ba53b0&quot;,&quot;parentUUID&quot;:&quot;4ab43a27-5da3-4fa3-a3a0-8a9cb43a0b94&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Update a investment.&quot;,&quot;fullTitle&quot;:&quot;Investments Route Update a investment.&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n    .request(server)\n    .put(`/investments/${id_investment}`)\n    .set(\&quot;Authorization\&quot;, `Bearer ${token}`)\n    .send({ period: periodYesterday })\n    .end((err, res) =&gt; {\n        expect(err).not.exist;\n        expect(res.status).to.equal(202);\n        expect(res.body).to.be.a(&#x27;object&#x27;);\n        expect(res.body).to.have.property(&#x27;msg&#x27;, &#x27;Investment updated.&#x27;);\n        expect(res.body).to.have.property(&#x27;investment&#x27;);\n        expect(res.body.investment).to.have.property(&#x27;id_investment&#x27;);\n        expect(res.body.investment).to.have.property(&#x27;period&#x27;).to.eql(periodYesterday);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;37137414-2044-43e2-b363-6c94406aa113&quot;,&quot;parentUUID&quot;:&quot;4ab43a27-5da3-4fa3-a3a0-8a9cb43a0b94&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Delete a investment.&quot;,&quot;fullTitle&quot;:&quot;Investments Route Delete a investment.&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n    .request(server)\n    .delete(`/investments/${id_investment}`)\n    .set(\&quot;Authorization\&quot;, `Bearer ${token}`)            \n    .end((err, res) =&gt; {\n        expect(err).not.exist;\n        expect(res.status).to.equal(202);\n        expect(res.body).to.be.a(&#x27;object&#x27;);\n        expect(res.body).to.have.property(&#x27;msg&#x27;, &#x27;Investment deleted.&#x27;);\n        expect(res.body.investment).to.have.property(&#x27;id_investment&#x27;).to.eql(id_investment);                 \n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6e59fea6-41b5-4399-9ab0-651405d6af70&quot;,&quot;parentUUID&quot;:&quot;4ab43a27-5da3-4fa3-a3a0-8a9cb43a0b94&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;68b102bb-f4c4-4f07-b412-9420500c1395&quot;,&quot;bf8d20b4-d0e7-4622-ad0d-24d3dcd77376&quot;,&quot;e7050b63-0336-468b-a1b2-d02f32dd6de2&quot;,&quot;1b876c0c-adc3-4afb-84d3-78db2bba00c4&quot;,&quot;5bc00a30-41fe-476e-802c-714662ba53b0&quot;,&quot;37137414-2044-43e2-b363-6c94406aa113&quot;,&quot;6e59fea6-41b5-4399-9ab0-651405d6af70&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:65,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000},{&quot;uuid&quot;:&quot;c631ec3d-7d67-4605-b0b8-d64c70286229&quot;,&quot;title&quot;:&quot;Login Route&quot;,&quot;fullFile&quot;:&quot;D:\\Desenvolvimento\\my-invest-server\\test\\login.js&quot;,&quot;file&quot;:&quot;\\test\\login.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Check login without parameter.&quot;,&quot;fullTitle&quot;:&quot;Login Route Check login without parameter.&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n    .request(server)\n    .post(&#x27;/login&#x27;)\n    .send({})\n    .end((err, res) =&gt; {\n        const bodyMsgs = res.body.errors.map((obj) =&gt; obj.msg);\n        const msgs = [&#x27;Email is required.&#x27;,\n            &#x27;Invalid Email format (email@domain.com).&#x27;,\n            &#x27;Password is required.&#x27;,\n            &#x27;Password must have min 8 characters.&#x27;];\n        expect(res.status).to.equal(400);\n        expect(res.body).to.be.a(&#x27;object&#x27;);\n        expect(res.body.errors).to.have.lengthOf(4);\n        bodyMsgs.map((element, index) =&gt; {\n            expect(element).to.equal(`${msgs[index]}`);\n        });\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;56b19259-8ff7-452d-a56e-788ea13d5a56&quot;,&quot;parentUUID&quot;:&quot;c631ec3d-7d67-4605-b0b8-d64c70286229&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Check login with wrong password.&quot;,&quot;fullTitle&quot;:&quot;Login Route Check login with wrong password.&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:63,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n    .request(server)\n    .post(&#x27;/login&#x27;)\n    .send({\n        email: default_user.email,\n        password: faker.internet.password(8)\n    })\n    .end((err, res) =&gt; {\n        expect(res.status).to.equal(401);\n        expect(res.body).to.be.a(&#x27;object&#x27;);\n        expect(res.body).to.have.property(&#x27;msg&#x27;, &#x27;Authentication failed.&#x27;);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;99cf1dc7-07d9-43e9-8290-08c7c56f7fba&quot;,&quot;parentUUID&quot;:&quot;c631ec3d-7d67-4605-b0b8-d64c70286229&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Check success login.&quot;,&quot;fullTitle&quot;:&quot;Login Route Check success login.&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:61,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n    .request(server)\n    .post(&#x27;/login&#x27;)\n    .send( default_user )\n    .end((err, res) =&gt; {\n        expect(res.status).to.equal(200);\n        expect(err).not.exist;\n        expect(res.body).to.be.a(&#x27;object&#x27;);\n        expect(res.body).to.have.property(&#x27;msg&#x27;, &#x27;Authentication success.&#x27;);\n        expect(res.body).to.have.property(&#x27;token&#x27;);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7096031d-c7f5-4bcc-96ba-281719a6c145&quot;,&quot;parentUUID&quot;:&quot;c631ec3d-7d67-4605-b0b8-d64c70286229&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;56b19259-8ff7-452d-a56e-788ea13d5a56&quot;,&quot;99cf1dc7-07d9-43e9-8290-08c7c56f7fba&quot;,&quot;7096031d-c7f5-4bcc-96ba-281719a6c145&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:128,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000},{&quot;uuid&quot;:&quot;a8c1f7cf-e65b-45cd-8158-12809fbc60ef&quot;,&quot;title&quot;:&quot;Stocks Route&quot;,&quot;fullFile&quot;:&quot;D:\\Desenvolvimento\\my-invest-server\\test\\stocks.js&quot;,&quot;file&quot;:&quot;\\test\\stocks.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Stocks Route\&quot;&quot;,&quot;fullTitle&quot;:&quot;Stocks Route \&quot;before all\&quot; hook in \&quot;Stocks Route\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:61,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n    .request(server)\n    .post(\&quot;/login\&quot;)\n    .send(tokenUser)\n    .end((err, res) =&gt; {\n        token = res.body.token;\n        expect(res).to.have.status(200);\n        done();\n    });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5559ddc6-a867-49b7-8d37-52244b91bcb7&quot;,&quot;parentUUID&quot;:&quot;a8c1f7cf-e65b-45cd-8158-12809fbc60ef&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Insert a stock.&quot;,&quot;fullTitle&quot;:&quot;Stocks Route Insert a stock.&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n    .request(server)\n    .post(&#x27;/stocks/&#x27;)\n    .set(\&quot;Authorization\&quot;, `Bearer ${token}`)\n    .send({\n        period: periodToday\n    })\n    .end((err, res) =&gt; {\n        expect(err).not.exist;\n        expect(res.status).to.equal(201);\n        expect(res.body).to.be.a(&#x27;object&#x27;);\n        expect(res.body).to.have.property(&#x27;msg&#x27;, &#x27;Investment created.&#x27;);\n        expect(res.body).to.have.property(&#x27;investment&#x27;);\n        expect(res.body.investment).to.have.property(&#x27;id_investment&#x27;);\n        expect(res.body.investment).to.have.property(&#x27;period&#x27;).to.eql(periodToday);\n        done();\n    })&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;ReferenceError: periodToday is not defined&quot;,&quot;estack&quot;:&quot;ReferenceError: periodToday is not defined\n    at Context.&lt;anonymous&gt; (test\\stocks.js:37:25)\n    at processImmediate (internal/timers.js:461:21)&quot;},&quot;uuid&quot;:&quot;705b96dc-c2bd-440b-83ba-0f29d026518b&quot;,&quot;parentUUID&quot;:&quot;a8c1f7cf-e65b-45cd-8158-12809fbc60ef&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Check inserting a investment with duplicated period.&quot;,&quot;fullTitle&quot;:&quot;Stocks Route Check inserting a investment with duplicated period.&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n    .request(server)\n    .post(&#x27;/investments/&#x27;)\n    .set(\&quot;Authorization\&quot;, `Bearer ${token}`)\n    .send({\n        period: periodToday\n    })\n    .end((err, res) =&gt; {\n        expect(err).not.exist;\n        expect(res.status).to.equal(409);\n        expect(res.body).to.be.a(&#x27;object&#x27;);\n        expect(res.body).to.have.property(&#x27;msg&#x27;, &#x27;Period already exists.&#x27;);  \n        expect(res.body).to.have.property(&#x27;period&#x27;).to.eql(periodToday);              \n        done();\n    })&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;ReferenceError: periodToday is not defined&quot;,&quot;estack&quot;:&quot;ReferenceError: periodToday is not defined\n    at Context.&lt;anonymous&gt; (test\\stocks.js:56:25)\n    at processImmediate (internal/timers.js:461:21)&quot;},&quot;uuid&quot;:&quot;90c97102-0db5-43c3-9379-903b4a310502&quot;,&quot;parentUUID&quot;:&quot;a8c1f7cf-e65b-45cd-8158-12809fbc60ef&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Get all investments.&quot;,&quot;fullTitle&quot;:&quot;Stocks Route Get all investments.&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n    .request(server)\n    .get(&#x27;/investments&#x27;)\n    .set(\&quot;Authorization\&quot;, `Bearer ${token}`)\n    .end((err, res) =&gt; {\n        expect(err).not.exist;\n        expect(res.status).to.equal(200);\n        expect(res.body).to.be.a(&#x27;object&#x27;);\n        expect(res.body).to.have.property(&#x27;records&#x27;).to.eql(1);\n        expect(res.body).to.have.property(&#x27;investments&#x27;).to.have.lengthOf(1);\n        expect(res.body.investments[0]).to.have.property(&#x27;id_investment&#x27;);\n        expect(res.body.investments[0]).to.have.property(&#x27;period&#x27;); \n        id_investment = res.body.investments[0].id_investment;\n        done();\n    })&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected 0 to deeply equal 1&quot;,&quot;estack&quot;:&quot;AssertionError: expected 0 to deeply equal 1\n    at D:\\Desenvolvimento\\my-invest-server\\test\\stocks.js:77:65\n    at Test.Request.callback (node_modules\\superagent\\lib\\node\\index.js:716:12)\n    at D:\\Desenvolvimento\\my-invest-server\\node_modules\\superagent\\lib\\node\\index.js:916:18\n    at IncomingMessage.&lt;anonymous&gt; (node_modules\\superagent\\lib\\node\\parsers\\json.js:19:7)\n    at endReadableNT (_stream_readable.js:1327:12)\n    at processTicksAndRejections (internal/process/task_queues.js:80:21)&quot;,&quot;diff&quot;:&quot;- 0\n+ 1\n&quot;},&quot;uuid&quot;:&quot;6c213771-f4fb-4bba-97d2-9ee8f16ee156&quot;,&quot;parentUUID&quot;:&quot;a8c1f7cf-e65b-45cd-8158-12809fbc60ef&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Get one investment.&quot;,&quot;fullTitle&quot;:&quot;Stocks Route Get one investment.&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n    .request(server)\n    .get(`/investments/${id_investment}`)\n    .set(\&quot;Authorization\&quot;, `Bearer ${token}`)\n    .end((err, res) =&gt; {\n        expect(err).not.exist;\n        expect(res.status).to.equal(200);\n        expect(res.body).to.be.a(&#x27;object&#x27;);\n        expect(res.body).to.have.property(&#x27;records&#x27;).to.eql(1);\n        expect(res.body).to.have.property(&#x27;investment&#x27;);\n        expect(res.body.investment).to.have.property(&#x27;id_investment&#x27;).to.eql(id_investment);\n        expect(res.body.investment).to.have.property(&#x27;period&#x27;).to.eql(periodToday+&#x27;T03:00:00.000Z&#x27;);                \n        done();\n    })&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;ReferenceError: id_investment is not defined&quot;,&quot;estack&quot;:&quot;ReferenceError: id_investment is not defined\n    at Context.&lt;anonymous&gt; (test\\stocks.js:88:34)\n    at processImmediate (internal/timers.js:461:21)&quot;},&quot;uuid&quot;:&quot;0f6b4a18-cca2-462c-a08a-237626e0a4f2&quot;,&quot;parentUUID&quot;:&quot;a8c1f7cf-e65b-45cd-8158-12809fbc60ef&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Update a investment.&quot;,&quot;fullTitle&quot;:&quot;Stocks Route Update a investment.&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n    .request(server)\n    .put(`/investments/${id_investment}`)\n    .set(\&quot;Authorization\&quot;, `Bearer ${token}`)\n    .send({ period: periodYesterday })\n    .end((err, res) =&gt; {\n        expect(err).not.exist;\n        expect(res.status).to.equal(202);\n        expect(res.body).to.be.a(&#x27;object&#x27;);\n        expect(res.body).to.have.property(&#x27;msg&#x27;, &#x27;Investment updated.&#x27;);\n        expect(res.body).to.have.property(&#x27;investment&#x27;);\n        expect(res.body.investment).to.have.property(&#x27;id_investment&#x27;);\n        expect(res.body.investment).to.have.property(&#x27;period&#x27;).to.eql(periodYesterday);\n        done();\n    })&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;ReferenceError: id_investment is not defined&quot;,&quot;estack&quot;:&quot;ReferenceError: id_investment is not defined\n    at Context.&lt;anonymous&gt; (test\\stocks.js:104:34)\n    at processImmediate (internal/timers.js:461:21)&quot;},&quot;uuid&quot;:&quot;43a884bd-f2e8-472e-84e3-e16579170a20&quot;,&quot;parentUUID&quot;:&quot;a8c1f7cf-e65b-45cd-8158-12809fbc60ef&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Delete a investment.&quot;,&quot;fullTitle&quot;:&quot;Stocks Route Delete a investment.&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n    .request(server)\n    .delete(`/investments/${id_investment}`)\n    .set(\&quot;Authorization\&quot;, `Bearer ${token}`)            \n    .end((err, res) =&gt; {\n        expect(err).not.exist;\n        expect(res.status).to.equal(202);\n        expect(res.body).to.be.a(&#x27;object&#x27;);\n        expect(res.body).to.have.property(&#x27;msg&#x27;, &#x27;Investment deleted.&#x27;);\n        expect(res.body.investment).to.have.property(&#x27;id_investment&#x27;).to.eql(id_investment);                 \n        done();\n    })&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;ReferenceError: id_investment is not defined&quot;,&quot;estack&quot;:&quot;ReferenceError: id_investment is not defined\n    at Context.&lt;anonymous&gt; (test\\stocks.js:121:37)\n    at processImmediate (internal/timers.js:461:21)&quot;},&quot;uuid&quot;:&quot;18a4f046-9f9e-4685-9698-ddfb11708a1b&quot;,&quot;parentUUID&quot;:&quot;a8c1f7cf-e65b-45cd-8158-12809fbc60ef&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[&quot;705b96dc-c2bd-440b-83ba-0f29d026518b&quot;,&quot;90c97102-0db5-43c3-9379-903b4a310502&quot;,&quot;6c213771-f4fb-4bba-97d2-9ee8f16ee156&quot;,&quot;0f6b4a18-cca2-462c-a08a-237626e0a4f2&quot;,&quot;43a884bd-f2e8-472e-84e3-e16579170a20&quot;,&quot;18a4f046-9f9e-4685-9698-ddfb11708a1b&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:8,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000},{&quot;uuid&quot;:&quot;29784b3c-89fc-4954-a37f-cf6be0c479aa&quot;,&quot;title&quot;:&quot;Users Route&quot;,&quot;fullFile&quot;:&quot;D:\\Desenvolvimento\\my-invest-server\\test\\users.js&quot;,&quot;file&quot;:&quot;\\test\\users.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Users Route\&quot;&quot;,&quot;fullTitle&quot;:&quot;Users Route \&quot;before all\&quot; hook in \&quot;Users Route\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:63,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n    .request(server)\n    .post(\&quot;/login\&quot;)\n    .send(tokenUser)\n    .end((err, res) =&gt; {\n        token = res.body.token;\n        expect(res).to.have.status(200);\n        done();\n    });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;86315373-2a29-4c4a-91f9-9a42571ce075&quot;,&quot;parentUUID&quot;:&quot;29784b3c-89fc-4954-a37f-cf6be0c479aa&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Insert a user.&quot;,&quot;fullTitle&quot;:&quot;Users Route Insert a user.&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:68,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n    .request(server)\n    .post(&#x27;/users/&#x27;)\n    .set(\&quot;Authorization\&quot;, `Bearer ${token}`)\n    .send({\n        email: user_email,\n        password: faker.internet.password(8),\n        permission_level: 0\n    })\n    .end((err, res) =&gt; {\n        expect(err).not.exist;\n        expect(res.status).to.equal(201);\n        expect(res.body).to.be.a(&#x27;object&#x27;);\n        expect(res.body).to.have.property(&#x27;msg&#x27;, &#x27;User created.&#x27;);\n        expect(res.body).to.have.property(&#x27;user&#x27;);\n        expect(res.body.user).to.have.property(&#x27;id_user&#x27;);               \n        expect(res.body.user).to.have.property(&#x27;email&#x27;).to.eql(user_email);\n        expect(res.body.user).to.have.property(&#x27;permission_level&#x27;).to.eql(0);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dba746f1-779b-41d1-bda2-26b502db1e1c&quot;,&quot;parentUUID&quot;:&quot;29784b3c-89fc-4954-a37f-cf6be0c479aa&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Insert a duplicated user.&quot;,&quot;fullTitle&quot;:&quot;Users Route Insert a duplicated user.&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n    .request(server)\n    .post(&#x27;/users/&#x27;)\n    .set(\&quot;Authorization\&quot;, `Bearer ${token}`)\n    .send({\n        email: &#x27;myinvest@server.com&#x27;,\n        password: faker.internet.password(8),\n        permission_level: 0 \n    })\n    .end((err, res) =&gt; {     \n        expect(err).not.exist;           \n        expect(res.status).to.equal(409);\n        expect(res.body).to.be.a(&#x27;object&#x27;);\n        expect(res.body).to.have.property(&#x27;msg&#x27;, &#x27;Email already exists.&#x27;); \n        expect(res.body).to.have.property(&#x27;email&#x27;).to.eql(&#x27;myinvest@server.com&#x27;);                \n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8d3b803a-020e-45b6-bff9-b38a20870318&quot;,&quot;parentUUID&quot;:&quot;29784b3c-89fc-4954-a37f-cf6be0c479aa&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Get all users.&quot;,&quot;fullTitle&quot;:&quot;Users Route Get all users.&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n    .request(server)\n    .get(&#x27;/users&#x27;)\n    .set(\&quot;Authorization\&quot;, `Bearer ${token}`)\n    .end((err, res) =&gt; {\n        expect(err).not.exist;\n        expect(res.status).to.equal(200);\n        expect(res.body).to.be.a(&#x27;object&#x27;);\n        expect(res.body).to.have.property(&#x27;records&#x27;).to.eql(2);\n        expect(res.body).to.have.property(&#x27;users&#x27;).to.have.lengthOf(2);\n        expect(res.body.users[1].user).to.have.property(&#x27;id_user&#x27;);\n        expect(res.body.users[1].user).to.have.property(&#x27;email&#x27;);\n        expect(res.body.users[1].user).to.have.property(&#x27;permission_level&#x27;);\n        user_email = res.body.users[1].user.email;\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;89b08993-6478-4d1c-9f10-6bf25cc06dd3&quot;,&quot;parentUUID&quot;:&quot;29784b3c-89fc-4954-a37f-cf6be0c479aa&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Get one user.&quot;,&quot;fullTitle&quot;:&quot;Users Route Get one user.&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n    .request(server)\n    .get(`/users/${user_email}`)\n    .set(\&quot;Authorization\&quot;, `Bearer ${token}`)\n    .end((err, res) =&gt; {\n        expect(err).not.exist;\n        expect(res.status).to.equal(200);\n        expect(res.body).to.be.a(&#x27;object&#x27;);\n        expect(res.body).to.have.property(&#x27;records&#x27;).to.eql(1);\n        expect(res.body).to.have.property(&#x27;user&#x27;);\n        expect(res.body.user).to.have.property(&#x27;id_user&#x27;);\n        expect(res.body.user).to.have.property(&#x27;email&#x27;).to.eql(user_email);\n        expect(res.body.user).to.have.property(&#x27;permission_level&#x27;).to.eql(0);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;280e9ae0-ca8f-496e-8a74-0296a95cf612&quot;,&quot;parentUUID&quot;:&quot;29784b3c-89fc-4954-a37f-cf6be0c479aa&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Update a user password.&quot;,&quot;fullTitle&quot;:&quot;Users Route Update a user password.&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:74,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n    .request(server)\n    .put(&#x27;/users/&#x27;)\n    .set(\&quot;Authorization\&quot;, `Bearer ${token}`)\n    .send({\n        email: user_email,\n        password: faker.internet.password(8)                \n    })\n    .end((err, res) =&gt; {\n        expect(err).not.exist;\n        expect(res.status).to.equal(202);\n        expect(res.body).to.be.a(&#x27;object&#x27;);\n        expect(res.body).to.have.property(&#x27;msg&#x27;, &#x27;User password updated.&#x27;);\n        expect(res.body).to.have.property(&#x27;user&#x27;);\n        expect(res.body.user).to.have.property(&#x27;id_user&#x27;);\n        expect(res.body.user).to.have.property(&#x27;email&#x27;).to.eql(user_email);                \n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ae2af196-fdd1-4e50-8ae6-93511561b009&quot;,&quot;parentUUID&quot;:&quot;29784b3c-89fc-4954-a37f-cf6be0c479aa&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Delete a user.&quot;,&quot;fullTitle&quot;:&quot;Users Route Delete a user.&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n    .request(server)\n    .delete(&#x27;/users/&#x27;)\n    .set(\&quot;Authorization\&quot;, `Bearer ${token}`)\n    .send({\n        email: user_email                              \n    })\n    .end((err, res) =&gt; {\n        expect(err).not.exist;\n        expect(res.status).to.equal(202);\n        expect(res.body).to.be.a(&#x27;object&#x27;);\n        expect(res.body).to.have.property(&#x27;msg&#x27;, &#x27;User deleted.&#x27;);\n        expect(res.body).to.have.property(&#x27;user&#x27;);                \n        expect(res.body.user).to.have.property(&#x27;email&#x27;).to.eql(user_email);                \n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8b5eb237-a930-4f08-9109-8d35f84c8e1d&quot;,&quot;parentUUID&quot;:&quot;29784b3c-89fc-4954-a37f-cf6be0c479aa&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;dba746f1-779b-41d1-bda2-26b502db1e1c&quot;,&quot;8d3b803a-020e-45b6-bff9-b38a20870318&quot;,&quot;89b08993-6478-4d1c-9f10-6bf25cc06dd3&quot;,&quot;280e9ae0-ca8f-496e-8a74-0296a95cf612&quot;,&quot;ae2af196-fdd1-4e50-8ae6-93511561b009&quot;,&quot;8b5eb237-a930-4f08-9109-8d35f84c8e1d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:171,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:1000}],&quot;meta&quot;:{&quot;mocha&quot;:{&quot;version&quot;:&quot;8.2.1&quot;},&quot;mochawesome&quot;:{&quot;options&quot;:{&quot;quiet&quot;:false,&quot;reportFilename&quot;:&quot;myinvest-server-test&quot;,&quot;saveHtml&quot;:true,&quot;saveJson&quot;:true,&quot;consoleReporter&quot;:&quot;spec&quot;,&quot;useInlineDiffs&quot;:false,&quot;code&quot;:true},&quot;version&quot;:&quot;6.2.1&quot;},&quot;marge&quot;:{&quot;options&quot;:{&quot;autoOpen&quot;:&quot;true&quot;,&quot;reportDir&quot;:&quot;test-report&quot;,&quot;reportFilename&quot;:&quot;myinvest-server-test&quot;,&quot;reportPageTitle&quot;:&quot;My Invest Server API Test&quot;,&quot;reportTitle&quot;:&quot;My Invest Server API Test&quot;},&quot;version&quot;:&quot;5.1.0&quot;}}}" data-config="{&quot;reportFilename&quot;:&quot;myinvest-server-test&quot;,&quot;reportDir&quot;:&quot;test-report&quot;,&quot;reportTitle&quot;:&quot;My Invest Server API Test&quot;,&quot;reportPageTitle&quot;:&quot;My Invest Server API Test&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:false,&quot;enableCharts&quot;:false,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:true,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:true,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;test-report\\assets&quot;,&quot;jsonFile&quot;:&quot;D:\\Desenvolvimento\\my-invest-server\\test-report\\myinvest-server-test.json&quot;,&quot;htmlFile&quot;:&quot;D:\\Desenvolvimento\\my-invest-server\\test-report\\myinvest-server-test.html&quot;}"><div id="report"></div><script src="assets\app.js"></script></body></html>